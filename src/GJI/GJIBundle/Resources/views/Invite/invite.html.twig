{% extends 'GJIBundle::index.html.twig' %}
{% block body %}

<div class="my-3 my-md-5">
     <div class="container">
          <div class="col-lg-8 col-md-8">


               <div class="custom-controls-stacked">
                    <label class="custom-control custom-radio custom-control-inline">
                         <input id="optionPhone" type="radio" class="custom-control-input" name="example-inline-radios" value="option1" checked="">
                         <span class="custom-control-label">Send your invitation by Phone Number</span>
                    </label>
                    <label class="custom-control custom-radio custom-control-inline">
                         <input id="optionMail" type="radio" class="custom-control-input" name="example-inline-radios" value="option2">
                         <span class="custom-control-label">Send your invitation by Email</span>
                    </label>

               </div>

               <form action="" method="post" class="card">
                    <div class="card-header">

                         <h3 class="card-title">Invite Friend to join group : {{title}} </h3>


                    </div>        
                    <div class="card-body body1">
                         <div class="row">
                            <div class="col-md-12 col-lg-12">

                                  <div  style="display:none;" class="alertDiv alert alert-dismissible alert-success">
                                    <button type="button" class="close" data-dismiss="alert"></button>
                                    <h4 class="alert-heading"> Your invitation has been sent successfully </h4>
                                  </div>


                                  <div  style="display:none;" class="alertDiv2 alert alert-dismissible alert-danger">
                                    <button type="button" class="close" data-dismiss="alert"></button>
                                    <h4 class="alert-heading"> Your Phone number or code country is incorrect </h4>
                                  </div>


                                  <div  class="loading" style="width: 50px ; display:none; margin-top:25px;margin-right: auto;margin-left: auto;">

                                      <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-rolling" style="background: none;"><circle cx="50" cy="50" fill="none" ng-attr-stroke='' ng-attr-stroke-width='' ng-attr-r="" ng-attr-stroke-dasharray='' stroke="#918784" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138" transform="rotate(172.193 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></circle></svg>

                                  </div>



                                   <p><strong>Share Link :</strong><a  target="_blank" href="https://groupji.com/register?link={{refgroup}} ">https://groupji.com/register?link={{refgroup}} </a></p>

                            </div>
                            <div class="col-md-12 col-lg-12">
                               <div class="form-group">

                                   <label class="form-label">Country Codes </label>
                              <select name="country" id="countrys" class="form-control custom-select">
                                   <option value="1">USA / Canada / Dominican Rep. / Puerto Rico (1)</option>
                                   <option value="93">Afghanistan (93)</option>
                                   <option value="355">Albania (355)</option>
                                   <option value="213">Algeria (213)</option>
                                   <option value="376">Andorra (376)</option>
                                   <option value="244">Angola (244)</option>
                                   <option value="1264">Anguilla (1264)</option>
                                   <option value="1268">Antigua &amp; Barbuda (1268)</option>
                                   <option value="54">Argentina (54)</option>
                                   <option value="374">Armenia (374)</option>
                                   <option value="297">Aruba (297)</option>
                                   <option value="61">Australia (61)</option>
                                   <option value="43">Austria (43)</option>
                                   <option value="994">Azerbaijan (994)</option>
                                   <option value="1242">Bahamas (1242)</option>
                                   <option value="973">Bahrain (973)</option>
                                   <option value="880">Bangladesh (880)</option>
                                   <option value="1246">Barbados (1246)</option>
                                   <option value="375">Belarus (375)</option>
                                   <option value="32">Belgium (32)</option>
                                   <option value="501">Belize (501)</option>
                                   <option value="229">Benin (229)</option>
                                   <option value="1441">Bermuda (1441)</option>
                                   <option value="975">Bhutan (975)</option>
                                   <option value="591">Bolivia (591)</option>
                                   <option value="387">Bosnia-Herzegovina (387)</option>
                                   <option value="267">Botswana (267)</option>
                                   <option value="55">Brazil (55)</option>
                                   <option value="1284">British Virgin Islands (1284)</option>
                                   <option value="673">Brunei (673)</option>
                                   <option value="359">Bulgaria (359)</option>
                                   <option value="226">Burkina Faso (226)</option>
                                   <option value="257">Burundi (257)</option>
                                   <option value="855">Cambodia (855)</option>
                                   <option value="237">Cameroon (237)</option>
                                   <option value="34">Spain (34)</option>
                                   <option value="238">Cape Verde (238)</option>
                                   <option value="1345">Cayman Islands (1345)</option>
                                   <option value="236">Central African Republic (236)</option>
                                   <option value="235">Chad (235)</option>
                                   <option value="56">Chile (56)</option>
                                   <option value="86">China (86)</option>
                                   <option value="57">Colombia (57)</option>
                                   <option value="269">Mayotte Island (Comoros) (269)</option>
                                   <option value="242">Congo (242)</option>
                                   <option value="243">Democratic Republic Congo (243)</option>
                                   <option value="682">Cook Islands (682)</option>
                                   <option value="385">Croatia (385)</option>
                                   <option value="53">Cuba (53)</option>
                                   <option value="357">Cyprus (357)</option>
                                   <option value="420">Czech Republic (420)</option>
                                   <option value="45">Denmark (45)</option>
                                   <option value="253">Djibouti (253)</option>
                                   <option value="1767">Dominica (1767)</option>
                                   <option value="670">East Timor (670)</option>
                                   <option value="593">Ecuador (593)</option>
                                   <option value="20">Egypt (20)</option>
                                   <option value="503">El Salvador (503)</option>
                                   <option value="240">Equatorial Guinea (240)</option>
                                   <option value="372">Estonia (372)</option>
                                   <option value="251">Ethiopia (251)</option>
                                   <option value="500">Falkland Islands (500)</option>
                                   <option value="298">Faroe Islands (298)</option>
                                   <option value="679">Fiji (679)</option>
                                   <option value="358">Finland (358)</option>
                                   <option value="33">France (33)</option>
                                   <option value="594">French Guiana (594)</option>
                                   <option value="689">French Polynesia (689)</option>
                                   <option value="241">Gabon (241)</option>
                                   <option value="220">Gambia (220)</option>
                                   <option value="995">Georgia (995)</option>
                                   <option value="49">Germany (49)</option>
                                   <option value="233">Ghana (233)</option>
                                   <option value="350">Gibraltar (350)</option>
                                   <option value="881">Global Mobile Satellite (881)</option>
                                   <option value="30">Greece (30)</option>
                                   <option value="299">Greenland (299)</option>
                                   <option value="1473">Grenada (1473)</option>
                                   <option value="590">Guadeloupe (590)</option>
                                   <option value="1671">Guam (1671)</option>
                                   <option value="502">Guatemala (502)</option>
                                   <option value="224">Guinea (224)</option>
                                   <option value="592">Guyana (592)</option>
                                   <option value="509">Haiti (509)</option>
                                   <option value="504">Honduras (504)</option>
                                   <option value="852">HongKong (852)</option>
                                   <option value="36">Hungary (36)</option>
                                   <option value="354">Iceland (354)</option>
                                   <option value="91">India (91)</option>
                                   <option value="62">Indonesia (62)</option>
                                   <option value="98">Iran (98)</option>
                                   <option value="964">Iraq (964)</option>
                                   <option value="353">Ireland (353)</option>
                                   <option value="972">Israel (972)</option>
                                   <option value="39">Italy / Vatican City State (39)</option>
                                   <option value="225">Ivory Coast (225)</option>
                                   <option value="1876">Jamaica (1876)</option>
                                   <option value="81">Japan (81)</option>
                                   <option value="962">Jordan (962)</option>
                                   <option value="254">Kenya (254)</option>
                                   <option value="82">Korea (South) (82)</option>
                                   <option value="965">Kuwait (965)</option>
                                   <option value="996">Kyrgyzstan (996)</option>
                                   <option value="856">Lao (856)</option>
                                   <option value="371">Latvia (371)</option>
                                   <option value="961">Lebanon (961)</option>
                                   <option value="266">Lesotho (266)</option>
                                   <option value="231">Liberia (231)</option>
                                   <option value="218">Libya (218)</option>
                                   <option value="423">Liechtenstein (423)</option>
                                   <option value="370">Lithuania (370)</option>
                                   <option value="352">Luxembourg (352)</option>
                                   <option value="853">Macau (853)</option>
                                   <option value="389">Macedonia (389)</option>
                                   <option value="261">Madagascar (261)</option>
                                   <option value="265">Malawi (265)</option>
                                   <option value="60">Malaysia (60)</option>
                                   <option value="960">Maldives (960)</option>
                                   <option value="223">Mali (223)</option>
                                   <option value="356">Malta (356)</option>
                                   <option value="596">Martinique (596)</option>
                                   <option value="222">Mauritania (222)</option>
                                   <option value="230">Mauritius (230)</option>
                                   <option value="52">Mexico (52)</option>
                                   <option value="373">Moldova (373)</option>
                                   <option value="377">Monaco (Kosovo) (377)</option>
                                   <option value="976">Mongolia (976)</option>
                                   <option value="382">Montenegro (382)</option>
                                   <option value="1664">Montserrat (1664)</option>
                                   <option value="212">Morocco (212)</option>
                                   <option value="258">Mozambique (258)</option>
                                   <option value="95">Myanmar (95)</option>
                                   <option value="264">Namibia (264)</option>
                                   <option value="977">Nepal (977)</option>
                                   <option value="31">Netherlands (31)</option>
                                   <option value="599">Netherlands Antilles (599)</option>
                                   <option value="687">New Caledonia (687)</option>
                                   <option value="64">New Zealand (64)</option>
                                   <option value="505">Nicaragua (505)</option>
                                   <option value="227">Niger (227)</option>
                                   <option value="234">Nigeria (234)</option>
                                   <option value="47">Norway (47)</option>
                                   <option value="968">Oman (968)</option>
                                   <option value="92">Pakistan (92)</option>
                                   <option value="970">Palestine (+970)</option>
                                   <option value="9725">Palestine (+9725)</option>
                                   <option value="507">Panama (507)</option>
                                   <option value="675">Papua New Guinea (675)</option>
                                   <option value="595">Paraguay (595)</option>
                                   <option value="51">Peru (51)</option>
                                   <option value="63">Philippines (63)</option>
                                   <option value="48">Poland (48)</option>
                                   <option value="351">Portugal (351)</option>
                                   <option value="974">Qatar (974)</option>
                                   <option value="262">Reunion (262)</option>
                                   <option value="40">Romania (40)</option>
                                   <option value="7">Russia / Kazakhstan (7)</option>
                                   <option value="250">Rwanda (250)</option>
                                   <option value="1670">Saipan (1670)</option>
                                   <option value="1684">Samoa (American) (1684)</option>
                                   <option value="685">Samoa (Western) (685)</option>
                                   <option value="378">San Marino (378)</option>
                                   <option value="882">Satellite-Thuraya (882)</option>
                                   <option value="966">Saudi Arabia (966)</option>
                                   <option value="221">Senegal (221)</option>
                                   <option value="381">Serbia (381)</option>
                                   <option value="248">Seychelles (248)</option>
                                   <option value="232">Sierra Leone (232)</option>
                                   <option value="65">Singapore (65)</option>
                                   <option value="421">Slovakia (421)</option>
                                   <option value="386">Slovenia (386)</option>
                                   <option value="252">Somalia (252)</option>
                                   <option value="27">South Africa (27)</option>
                                   <option value="94">Sri Lanka (94)</option>
                                   <option value="1869">St. Kitts And Nevis (1869)</option>
                                   <option value="1758">St. Lucia (1758)</option>
                                   <option value="1784">St. Vincent (1784)</option>
                                   <option value="249">Sudan (249)</option>
                                   <option value="597">Suriname (597)</option>
                                   <option value="268">Swaziland (268)</option>
                                   <option value="46">Sweden (46)</option>
                                   <option value="41">Switzerland (41)</option>
                                   <option value="963">Syria (963)</option>
                                   <option value="886">Taiwan (886)</option>
                                   <option value="992">Tajikistan (992)</option>
                                   <option value="255">Zanzibar (255)</option>
                                   <option value="66">Thailand (66)</option>
                                   <option value="228">Togo (228)</option>
                                   <option value="676">Tonga Islands (676)</option>
                                   <option value="1868">Trinidad and Tobago (1868)</option>
                                   <option value="216">Tunisia (216)</option>
                                   <option value="90">Turkey (90)</option>
                                   <option value="993">Turkmenistan (993)</option>
                                   <option value="1649">Turks and Caicos Islands (1649)</option>
                                   <option value="256">Uganda (256)</option>
                                   <option value="44">UK / Isle of Man / Jersey / Guernsey (44)</option>
                                   <option value="380">Ukraine (380)</option>
                                   <option value="971">United Arab Emirates (971)</option>
                                   <option value="598">Uruguay (598)</option>
                                   <option value="998">Uzbekistan (998)</option>
                                   <option value="678">Vanuatu (678)</option>
                                   <option value="58">Venezuela (58)</option>
                                   <option value="84">Vietnam (84)</option>
                                   <option value="967">Yemen (967)</option>
                                   <option value="260">Zambia (260)</option>
                                   <option value="263">Zimbabwe (263)</option>
                                </select>
                               </div>
                               <div class="form-group">
                                  <label class="form-label">Phone Number </label>
                                  <input id="nbrPhone" type="Number" class="form-control" name="example-text-input" placeholder="phone number">
                               </div>
                            </div>
                         </div>
                    </div>
                    <div class="card-footer text-right body1">
                         <div class="d-flex">
                            <a href="javascript:void(0)" class="btn btn-link">Cancel</a>
                            <button type="button" class="sendOtp btn btn-primary ml-auto"><i class="fe fe-user-plus"></i> Invite Friends </button>
                         </div>
                    </div>

                    <div class="card-body body2" style="display:none" >
                         <div class="row">
                            <div class="col-md-12 col-lg-12">

                                  <div  style="display:none;" class="alertDiv22 alert alert-dismissible alert-success">
                                    <button type="button" class="close" data-dismiss="alert"></button>
                                    <h4 class="alert-heading"> Your invitation has been sent successfully </h4>
                                  </div>


                                  <div  style="display:none;" class="alertDiv222 alert alert-dismissible alert-danger">
                                    <button type="button" class="close" data-dismiss="alert"></button>
                                    <h4 class="alert-heading"> Your Email is incorrect </h4>
                                  </div>


                                  <div  class="loading2" style="width: 50px ; display:none; margin-top:25px;margin-right: auto;margin-left: auto;">

                                      <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-rolling" style="background: none;"><circle cx="50" cy="50" fill="none" ng-attr-stroke='' ng-attr-stroke-width='' ng-attr-r="" ng-attr-stroke-dasharray='' stroke="#918784" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138" transform="rotate(172.193 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></circle></svg>

                                  </div>



                                   <p><strong>Share Link :</strong><a  target="_blank" href="https://groupji.com/register?link={{refgroup}} ">https://groupji.com/register?link={{refgroup}} </a></p>

                            </div>
                            <div class="col-md-12 col-lg-12">
                               <div class="form-group">


                               </div>
                               <div class="form-group">
                                  <label class="form-label">Email </label>
                                  <input id="email" type="email" class="form-control" name="email" placeholder="Email">
                               </div>
                            </div>
                         </div>
                    </div>

                    <div class="card-footer text-right body2" style="display:none">
                         <div class="d-flex">
                            <a href="javascript:void(0)" class="btn btn-link">Cancel</a>
                            <button type="button" class="sendmail btn btn-primary ml-auto"><i class="fe fe-user-plus"></i> Invite Friends </button>
                         </div>
                    </div>

               </form>
      </div>
     </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script>



    fnameVal = 0
    lnameVal = 0
    emailVal = 0
    nbrPhoneVal = 0
    passwordVal = 0

    OTPCode = 0

    var dataSet = []


$('#optionPhone').click(function() {

    $('.body1').show()
    $('.body2').hide()
   
});


$('#optionMail').click(function() {


    $('.body1').hide()
    $('.body2').show()
   
});



    $(".sendOtp").click(function() {


          $(".loading").show()
          $(".alertDiv2").hide()

          countrys = $('#countrys').val()
          nbrPhone = $('#nbrPhone').val()
          refgroup='{{refgroup}}'
          nameUser='{{nameUser}}'
          $("#countrys").removeClass('is-invalid')

          CheckPhone = CheckPhoneNumber(nbrPhone, 'nbrPhone')




          if (nbrPhoneVal == 1 ) {

            // nbrPhone = nbrPhone.substr(1);
            // Phone = '+' + countrys + '' + nbrPhone
            // console.log(Phone)
            console.log(refgroup)
            console.log(nameUser)
            $.post("{{ path('SendInvitation') }}", {
                    tel: nbrPhone,
                    countrys: countrys,
                    refgroup:refgroup,
                    nameUser:nameUser
                },
                function(datas, status) {

                    if (status == 'success') {

                        OTPCode = datas
                        console.log(OTPCode)
                        $(".loading").hide()
                        $('#registerS1').hide()
                        $('#registerS2').show()
                        $('.alertDiv').show()


                    }

                })

               .fail(function() {

                    $("#countrys").addClass('is-invalid')
                    $(".loading").hide()
                    $(".alertDiv2").show()

               })





          } else {

            $(".loading").hide()


          }



    });





function CheckEmailFormat(inputText, IdInput) {

   var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

   if (inputText.match(mailformat)) {
       $("#" + IdInput).removeClass('is-invalid')
       $('#email').parent().children('p').hide()
       emailVal = 1;
   } else {
       $("#" + IdInput).addClass('is-invalid')
       $('#email').parent().children('p').show()

       emailVal = 0;
   }

     return emailVal
}


function CheckPhoneNumber(inputtxt, IdInput) {

   var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
   if (inputtxt.match(phoneno)) {

       $("#" + IdInput).removeClass('is-invalid')
       $('#nbrPhone').parent().children('p').hide()
       nbrPhoneVal = 1;

   } else {
       $("#" + IdInput).addClass('is-invalid')
       $('#nbrPhone').parent().children('p').show()
       nbrPhoneVal = 0;
   }

}



//------------------------




$('.sendmail').click(function() {



     $(".loading2").show()
     $(".alertDiv222").hide()
     $(".alertDiv22").hide()

     email = $('#email').val()
     CheckEmail = CheckEmailFormat(email, 'email')

     if(CheckEmail == 1){

          $.post("{{ path('InviteByMail') }}", {
               emailS: email,
               refgroup : '{{refgroup}}',
               nameUser : '{{nameUser}}'               
          },
          function(dataEmail, statusEmail) {

               if (statusEmail == 'success' && dataEmail==1) {

                   $(".loading2").hide()
                   $('.alertDiv22').show()

               }else{

                   $(".loading2").hide()
                   $('.alertDiv222').show()
               }

          })

     }else{

          $('.loading2').hide()

     }

  




});


</script>



{% endblock %}
